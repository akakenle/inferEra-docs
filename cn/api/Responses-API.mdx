---
title: "Openai Responses API 支持"
icon: "o"
---

支持 Openai 的 Responses API 多功能接口，已经上线的功能接口如下：

- ✅ Text input：文本输入
- ✅ Image input：图文输入
- ✅ Streaming：流式调用
- ✅ Functions：函数调用
- ✅ image_generation：绘图工具调用，图片生成部分按 `gpt-image-1` 计价
- ✅ Web search：搜索
- ✅ Computer Use：自动操作
- ✅ Reasoning：推理深度，支持 3 档

## 使用 (Python 调用)：

与官方的 OpenAI 调用方式一致，只是替换 `api_key` 和 `base_url` 进行转发。
大陆可以直连访问。

```py
client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # 换成你在后台生成的 Key "sk-***"
    base_url="https://aihubmix.com/v1"
)
```

对于推理模型，支持通过以下参数来输出推理总结，总结细节的丰富程度为 detailed \> auto \> None，其中 auto 为最佳平衡。

```py
"summary": "auto" 
```

<CodeGroup>

```py 文本
from openai import OpenAI
import os

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # 换成你在后台生成的 Key "sk-***"
    base_url="https://aihubmix.com/v1"
)

response = client.responses.create(
  model="gpt-4o-mini", # codex-mini-latest 可用
  input="Tell me a three sentence bedtime story about a unicorn."
)

print(response)
```

```py 图文
from openai import OpenAI

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # 换成你在后台生成的 Key "sk-***"
    base_url="https://aihubmix.com/v1"
)

response = client.responses.create(
    model="gpt-4o-mini", # codex-mini-latest 可用
    input=[
        {
            "role": "user",
            "content": [
                { "type": "input_text", "text": "what is in this image?" },
                {
                    "type": "input_image",
                    "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg"
                }
            ]
        }
    ]
)

print(response)
```

```py 流式
from openai import OpenAI

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # 换成你在后台生成的 Key "sk-***"
    base_url="https://aihubmix.com/v1"
)

response = client.responses.create(
  model="gpt-4o-mini", # codex-mini-latest 可用
  instructions="You are a helpful assistant.",
  input="Hello!",
  stream=True
)

for event in response:
  print(event)
```

```py 搜索
from openai import OpenAI

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # 换成你在后台生成的 Key "sk-***"
    base_url="https://aihubmix.com/v1"
)

response = client.responses.create(
  model="gpt-4o-mini", # codex-mini-latest 不支持搜索📍
  tools=[{ "type": "web_search_preview" }],
  input="What was a positive news story from today?",
)

print(response)
```

```py 函数调用
from openai import OpenAI

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # 换成你在后台生成的 Key "sk-***"
    base_url="https://aihubmix.com/v1"
)

tools = [
    {
        "type": "function",
        "name": "get_current_weather",
        "description": "Get the current weather in a given location",
        "parameters": {
          "type": "object",
          "properties": {
              "location": {
                  "type": "string",
                  "description": "The city and state, e.g. San Francisco, CA",
              },
              "unit": {"type": "string", "enum": ["celsius", "fahrenheit"]},
          },
          "required": ["location", "unit"],
        }
    }
]

response = client.responses.create(
  model="gpt-4o-mini", # codex-mini-latest 可用
  tools=tools,
  input="What is the weather like in Boston today?",
  tool_choice="auto"
)

print(response)
```

```py 图片生成工具
from openai import OpenAI
import base64

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # 换成你在后台生成的 Key "sk-***"
    base_url="https://aihubmix.com/v1"
)

response = client.responses.create(
    model="gpt-4.1-mini",
    input="Generate an image of gray tabby cat hugging an otter with an orange scarf",
    tools=[{"type": "image_generation"}],
)

# 保存为图片文件
image_data = [
    output.result
    for output in response.output
    if output.type == "image_generation_call"
]

if image_data:
    image_base64 = image_data[0]
    with open("cat_and_otter.png", "wb") as f:
        f.write(base64.b64decode(image_base64))
```

```py 推理
from openai import OpenAI

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # 换成你在后台生成的 Key "sk-***"
    base_url="https://aihubmix.com/v1/"
)

response = client.responses.create(
    model="o4-mini", # 支持 codex-mini-latest, o4-mini, o3-mini, o3, o1
    input="How much wood would a woodchuck chuck?",
    reasoning={
        "effort": "medium", # 支持 low, medium, high
        "summary": "auto" # 推理总结
    }
)

print(response)
```

</CodeGroup>

**注意：**

1. 最新的 \`codex-mini-latest\` 不支持搜索
2. Computer use 需要配合 Praywright 使用，建议参考[官方仓库](https://github.com/openai/openai-cua-sample-app)

已知细节问题：

- 调用用例复杂
- 截图大量，耗时久，任务成功率低
- 或触发 CAPTCHA 验证或 Cloudflare 真人验证，可能遇到无限循环