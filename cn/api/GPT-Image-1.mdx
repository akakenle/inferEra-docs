---
title: "GPT Image"
description: " "
icon: "palette"
---

## 1ï¸âƒ£ gpt-image-1 æ¥å£è¯´æ˜

OpenAI çš„ç»˜å›¾æ¥å£ `gpt-image-1`ï¼Œæ”¯æŒæ–‡ç”Ÿå›¾ï¼ˆgenerateï¼‰ã€å›¾æ–‡ç”Ÿå›¾ï¼ˆeditï¼‰ã€‚\
ä½¿ç”¨å‰è¯·è¿è¡Œ `pip install -U openai` å‡çº§åˆ°æœ€æ–°çš„ openai åŒ…ã€‚

## æ³¨æ„äº‹é¡¹

<Warning>
  - ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œæ— è®ºä»»ä½•æƒ…å†µå¯¼è‡´çš„ä¸­æ–­æˆ–å¤±è´¥ï¼Œ**æ¥å£è°ƒç”¨ä¸€ç»å‘å‡ºï¼Œéƒ½ä¼šè¢«æ‰£å–è´¹ç”¨**
  - è¿˜åœ¨ä¸–çš„è‰ºæœ¯å®¶åç§°ï¼ˆå¦‚ã€Œå®«å´éªã€ã€ã€Œæ–°æµ·è¯šã€ç­‰ï¼‰ä¼šè§¦å‘ `moderation_blocked` æŠ¥é”™ï¼Œ**å¯¼è‡´ç”Ÿæˆå¤±è´¥**ã€‚ä½ å¯ä»¥é€šè¿‡ã€Œå‰åœåŠ›ã€ã€ã€Œæ˜äº®çš„ç°ä»£æ—¥å¼åŠ¨æ¼«é£æ ¼ã€ç­‰éæ•æ„Ÿè¯æ¥è§„é¿ã€‚è¡£ç€æš´éœ²æˆ–å«æœ‰æš—ç¤ºçš„å›¾ç‰‡åŒç†ã€‚
  - æ€»çš„æ¥è¯´,ã€Œé£æ ¼ã€æ¯”ã€Œè‰ºæœ¯å®¶ã€å®‰å…¨ï¼Œåƒæ˜¯ã€Œçš®å…‹æ–¯ã€ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚
  - æ›´ç¨³å¦¥çš„åšæ³•æ˜¯é‡‡ç”¨å·²æ•…è‰ºæœ¯å®¶æˆ–å¯¹åº”çš„é£æ ¼ï¼Œå¦‚ã€Œæ¢µé«˜ã€ã€ã€Œè’™å¨œä¸½èã€ç­‰ã€‚
</Warning>

## æ¨¡å‹å’Œè´¹ç‡

| æ¨¡å‹          | è´¨é‡     | 1024x1024 | 1024x1536 | 1536x1024 |
| ----------- | ------ | --------- | --------- | --------- |
| gpt-image-1 | low    | \$0.011   | \$0.016   | \$0.016   |
| gpt-image-1 | medium | \$0.042   | \$0.063   | \$0.063   |
| gpt-image-1 | high   | \$0.167   | \$0.25    | \$0.25    |

<Info>
  æ³¨æ„ï¼šè¾“å…¥æ–‡æœ¬ Token éƒ¨åˆ†çš„è´¹ç‡æ˜¯ \$5/ç™¾ä¸‡ Tokensï¼Œé¢å¤–è®¡ç®—ã€‚
</Info>

## è°ƒç”¨æ–¹æ³•

**ç«¯ç‚¹ (Endpoints)**

1. ç»˜å›¾ï¼š`https://aihubmix.com/v1/images/generations`
2. ç¼–è¾‘ï¼š`https://aihubmix.com/v1/images/edits`

**Python è°ƒç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š**

<CodeGroup>

```py ç”Ÿæˆ (æ–‡ç”Ÿå›¾)
from openai import OpenAI
import base64
import os

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # æ¢æˆä½ åœ¨åå°ç”Ÿæˆçš„ Key "sk-***"
    base_url="https://aihubmix.com/v1"
)

prompt = """redesign poster of the movie [Black Swan], 3D cartoon, smooth render, bright tone, 2:3 portrait."""

result = client.images.generate(
    model="gpt-image-1",
    prompt=prompt,
    n=1, # å•æ¬¡å‡ºå›¾æ•°é‡ï¼Œæœ€å¤š 10 å¼ 
    size="1024x1536", # 1024x1024 (square), 1536x1024 (3:2 landscape), 1024x1536 (2:3 portrait), auto (default) 
    quality="high", # high, medium, low, auto (default)
    moderation="low", # low, auto (default) éœ€è¦å‡çº§ openai åŒ… ğŸ“
    background="auto", # transparent, opaque, auto (default)
)

print(result.usage)

# å®šä¹‰æ–‡ä»¶åå‰ç¼€å’Œä¿å­˜ç›®å½•
output_dir = "." # å¯ä»¥æŒ‡å®šå…¶ä»–ç›®å½•
file_prefix = "image_gen"

# ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨
os.makedirs(output_dir, exist_ok=True)

# éå†æ‰€æœ‰è¿”å›çš„å›¾ç‰‡æ•°æ®
for i, image_data in enumerate(result.data):
    image_base64 = image_data.b64_json
    if image_base64: # ç¡®ä¿ b64_json ä¸ä¸ºç©º
        image_bytes = base64.b64decode(image_base64)

        # --- æ–‡ä»¶åå†²çªå¤„ç†é€»è¾‘å¼€å§‹ ---
        current_index = i
        while True:
            # æ„å»ºå¸¦è‡ªå¢åºå·çš„æ–‡ä»¶å
            file_name = f"{file_prefix}_{current_index}.png"
            file_path = os.path.join(output_dir, file_name) # æ„å»ºå®Œæ•´æ–‡ä»¶è·¯å¾„

            # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
            if not os.path.exists(file_path):
                break # æ–‡ä»¶åä¸å†²çªï¼Œè·³å‡ºå¾ªç¯

            # æ–‡ä»¶åå†²çªï¼Œå¢åŠ åºå·
            current_index += 1

        # ä½¿ç”¨æ‰¾åˆ°çš„å”¯ä¸€ file_path ä¿å­˜å›¾ç‰‡åˆ°æ–‡ä»¶
        with open(file_path, "wb") as f:
            f.write(image_bytes)
        print(f"å›¾ç‰‡å·²ä¿å­˜è‡³ï¼š{file_path}")
    else:
        print(f"ç¬¬ {i} å¼ å›¾ç‰‡æ•°æ®ä¸ºç©ºï¼Œè·³è¿‡ä¿å­˜ã€‚")
```


```py ç¼–è¾‘ (å¤šå›¾+æ–‡ç”Ÿå›¾)
from openai import OpenAI
import base64
import os

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # æ¢æˆä½ åœ¨åå°ç”Ÿæˆçš„ Key "sk-***"
    base_url="https://aihubmix.com/v1"
)

prompt = """redesign poster of the movie [Black Swan], 3D cartoon, smooth render, bright tone, 2:3 portrait."""

result = client.images.edit(
    model="gpt-image-1",
    image=open("yourpath/edit.jpg", "rb"), #å¤šå‚è€ƒå›¾åº”ä½¿ç”¨ [åˆ—è¡¨ï¼Œ]
    n=2, # å•æ¬¡æ•°é‡
    prompt=prompt,
    size="1024x1536", # 1024x1024 (square), 1536x1024 (3:2 landscape), 1024x1536 (2:3 portrait), auto (default)
    input_fidelity="high", # ç‰¹å¾ä¿ç•™å‚æ•°ï¼Œé»˜è®¤ low
    # moderation="low", # edit ä¸æ”¯æŒ moderation
    quality="high" # high, medium, low, auto (default)
)

print(result.usage)

# å®šä¹‰æ–‡ä»¶åå‰ç¼€å’Œä¿å­˜ç›®å½•
output_dir = "." # å¯ä»¥æŒ‡å®šå…¶ä»–ç›®å½•
file_prefix = "image_edit" # ä¿®æ”¹æ–‡ä»¶åå‰ç¼€

# ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨
os.makedirs(output_dir, exist_ok=True)

# --- éå† API è¿”å›çš„æ¯å¼ å›¾ç‰‡æ•°æ® ---
for i, image_item in enumerate(result.data):
    image_base64 = image_item.b64_json
    if image_base64 is None:
        print(f"è­¦å‘Šï¼šç¬¬ {i+1} å¼ å›¾ç‰‡æ²¡æœ‰è¿”å› base64 æ•°æ®ï¼Œè·³è¿‡ä¿å­˜ã€‚")
        continue # å¦‚æœæ²¡æœ‰ b64_json æ•°æ®ï¼Œè·³åˆ°ä¸‹ä¸€å¼ å›¾ç‰‡

    image_bytes = base64.b64decode(image_base64)

    # --- ä¸ºå½“å‰å›¾ç‰‡å¯»æ‰¾ä¸å†²çªçš„æ–‡ä»¶å ---
    current_index = 0 # æ¯æ¬¡éƒ½ä» 0 å¼€å§‹æ£€æŸ¥ï¼Œæˆ–è€…ç»´æŠ¤ä¸€ä¸ªå…¨å±€é€’å¢çš„ç´¢å¼•
    while True:
        # æ„å»ºå¸¦è‡ªå¢åºå·çš„æ–‡ä»¶å
        file_name = f"{file_prefix}_{current_index}.png"
        file_path = os.path.join(output_dir, file_name) # æ„å»ºå®Œæ•´æ–‡ä»¶è·¯å¾„

        # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        if not os.path.exists(file_path):
            break # æ–‡ä»¶åä¸å†²çªï¼Œè·³å‡ºå†…éƒ¨å¾ªç¯

        # æ–‡ä»¶åå†²çªï¼Œå¢åŠ åºå·
        current_index += 1

    # ä½¿ç”¨æ‰¾åˆ°çš„å”¯ä¸€ file_path ä¿å­˜å½“å‰å›¾ç‰‡åˆ°æ–‡ä»¶
    try:
        with open(file_path, "wb") as f:
            f.write(image_bytes)
        print(f"ç¬¬ {i+1} å¼ ç¼–è¾‘åçš„å›¾ç‰‡å·²ä¿å­˜è‡³ï¼š{file_path}")
    except Exception as e:
        print(f"ä¿å­˜ç¬¬ {i+1} å¼ å›¾ç‰‡æ—¶å‡ºé”™ ({file_path}): {e}")
```

</CodeGroup>

æ›´å¤šçš„å‚æ•°ç»†èŠ‚å¯ä»¥å‚è€ƒ [OpenAI å®˜æ–¹æ–‡æ¡£](https://platform.openai.com/docs/api-reference/images/create)

## è¾“å‡ºç¤ºä¾‹

<CodeGroup>

```json ç”Ÿæˆ
Usage(input_tokens=150, input_tokens_details=UsageInputTokensDetails(image_tokens=0, text_tokens=150), output_tokens=6240, total_tokens=6390)
å›¾ç‰‡å·²ä¿å­˜è‡³ï¼š./image_gen_14.png
```


```json ç¼–è¾‘
Usage(input_tokens=992, input_tokens_details=UsageInputTokensDetails(image_tokens=646, text_tokens=346), output_tokens=12480, total_tokens=13472)
ç¬¬ 1 å¼ ç¼–è¾‘åçš„å›¾ç‰‡å·²ä¿å­˜è‡³ï¼š./image_edit_1.png
ç¬¬ 2 å¼ ç¼–è¾‘åçš„å›¾ç‰‡å·²ä¿å­˜è‡³ï¼š./image_edit_2.png
```

</CodeGroup>

## è¢«æ‹’çš„æƒ…å†µ

è¯·æ±‚è¢«æ‹’çš„é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š

```json
Error code: 400 - {'error': {'message': 'Your request was rejected as a result of our safety system. Your request may contain content that is not allowed by our safety system.', 'type': 'user_error', 'param': None, 'code': 'moderation_blocked'}}
```

å¯¹äºå•æ¬¡è¯·æ±‚ç”Ÿæˆ 2-10 å¼ å›¾ç‰‡çš„æƒ…å†µï¼Œå¦‚æœç³»ç»Ÿæ£€æµ‹åˆ°è¯·æ±‚æ¶‰å«Œè¿åå¹³å°æ”¿ç­–ï¼Œè¯¥è¯·æ±‚ä¸­çš„è¿è§„éƒ¨åˆ†å°†ä¸ä¼šè¢«ç”Ÿæˆã€‚è¿™å¯èƒ½å¯¼è‡´å®é™…ç”Ÿæˆå›¾ç‰‡æ•°é‡å°‘äºç”¨æˆ·è¯·æ±‚æ•°é‡ï¼Œç„¶è€Œå¤šå›¾çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šæŠ›å‡º `moderation_blocked`ã€‚
å› æ­¤ï¼Œè¯·åœ¨åˆ›ä½œä¸­ä¸»åŠ¨è§„é¿æ½œåœ¨çš„çŸ¥è¯†äº§æƒï¼ˆIPï¼‰æˆ–ç‰ˆæƒé—®é¢˜ï¼Œä»¥å‡å°‘ç”Ÿæˆè¢«ç³»ç»Ÿæ‹¦æˆªçš„é£é™©ï¼Œç¡®ä¿åˆ›ä½œé¡ºåˆ©å®Œæˆã€‚

**âœï¸ å…³é”®æç¤ºï¼š**

- é¿å…ç›´æ¥ä½¿ç”¨å·²çŸ¥çš„å—ç‰ˆæƒä¿æŠ¤è§’è‰²ã€å“ç‰Œæ ‡å¿—ã€åäººè‚–åƒç­‰
- å¯ä»¥é‡‡ç”¨ã€Œé£æ ¼å€Ÿé‰´ã€ã€Œåˆ›æ„æ”¹ç¼–ã€ã€Œæ³›æŒ‡æè¿°ã€ç­‰æ–¹å¼è¡¨è¾¾
- è‹¥éœ€å¼•ç”¨ç‰¹å®šå…ƒç´ ï¼Œè¯·æå‰ç¡®è®¤è¯¥å…ƒç´ æ˜¯å¦å¤„äºå…¬æœ‰é¢†åŸŸ

## å®ç”¨æç¤º

<Tip>
  - æ”¯æŒä»»ä½•è¯­è¨€ï¼Œä¸­æ–‡ç»˜åˆ¶ä¹Ÿå¾ˆç¨³å®šï¼Œä½†æˆ‘ä»¬ä¹Ÿä¸å»ºè®®ç»˜åˆ¶å¤§é‡çš„æ–‡æœ¬
  - size å‚æ•°ä¸æ”¯æŒæ˜¾ç¤ºä¼ å…¥ size="auto"ï¼Œé»˜è®¤å³ auto
  - ç”»å¹…æ¯”ä¾‹å¯ä»¥åœ¨ prompt ä¸­æŒ‡å®šï¼Œæ”¯æŒ 2:3ã€3:2ã€1:1ï¼Œä¹Ÿå¯ä»¥åœ¨ size å‚æ•°ä¸­è®¾ç½®ã€‚
  - æ”¯æŒæ§åˆ¶æ•æ„Ÿåº¦çš„ `moderation` å‚æ•°ï¼Œä½†è¿™ä¸ªå‚æ•°è®¾ä¸º low ä¹Ÿå¯èƒ½è¢«æ‹’ï¼Œæ¯”å¦‚è¯´ç»´çº³æ–¯è¿‡äºæš´éœ²
  - edits ç«¯å£ä¸æ”¯æŒ `moderation` å‚æ•°
  - æ–‡æœ¬æè¿°å’Œå‚è€ƒå›¾æ­é…ï¼Œèå›¾æ•ˆæœæ›´å‡†ç¡®
  - ä¸Šä¼ çš„å›¾ç‰‡å¯ä»¥åšå‹ç¼©é¢„å¤„ç†ï¼Œæå‡é€Ÿåº¦
  - æ”¯æŒé€æ˜èƒŒæ™¯ï¼Œå…æŠ å›¾ã€‚â€”â€”åªéœ€è¦åœ¨ Prompt ä¸­è¡¥å……è¦æ±‚
</Tip>

---

## 2ï¸âƒ£ GPT ç»˜å›¾é€†å‘æ¥å£è¯´æ˜

ä¸ºæ»¡è¶³ç”¨æˆ·çš„å¼ºçƒˆéœ€æ±‚ï¼Œæˆ‘ä»¬ç‰¹åˆ«æ¨å‡ºäº†ä¸¤ä¸ªé€†å‘æ¥å£ï¼š`gpt-4o-image` ä¸ `gpt-4o-image-vip`ã€‚å…¶ä¸­ï¼ŒVIP æ¨¡å‹åœ¨æ€§èƒ½å’Œç¨³å®šæ€§æ–¹é¢è¡¨ç°æ›´ä¸ºå‡ºè‰²ã€‚\
è¯·æ³¨æ„ï¼Œè¿™äº›é€†å‘æ¥å£æ— æ³•ä¿è¯å®Œå…¨ç¨³å®šï¼Œå¯èƒ½ä¼šå‡ºç° `ğŸ• Queuing...` æ’é˜ŸçŠ¶æ€æˆ–ç”Ÿæˆå¤±è´¥çš„æƒ…å†µï¼Œå› æ­¤å»ºè®®ä»…å°†å…¶ç”¨äºä½“éªŒæ–°åŠŸèƒ½æˆ–è¿›è¡Œæµ‹è¯•ã€‚\
é‰´äº OpenAI å·²æ­£å¼å‘å¸ƒ `gpt-image-1` æ¥å£ï¼Œè€ƒè™‘åˆ°è°ƒç”¨æˆæœ¬å› ç´ ï¼Œæˆ‘ä»¬å°†æš‚æ—¶ä¿ç•™è¿™äº›é€†å‘æ¥å£ï¼Œå¹¶æä¾›å®Œå…¨å…¼å®¹çš„è°ƒç”¨æ–¹å¼ã€‚

## æ³¨æ„äº‹é¡¹

<Warning>
  - ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œæ— è®ºä»»ä½•æƒ…å†µå¯¼è‡´çš„ä¸­æ–­æˆ–å¤±è´¥ï¼Œ**æ¥å£è°ƒç”¨ä¸€ç»å‘å‡ºï¼Œéƒ½ä¼šè¢«æ‰£å–è´¹ç”¨**
  - è¿˜åœ¨ä¸–çš„è‰ºæœ¯å®¶åç§°ï¼ˆå¦‚ã€Œå®«å´éªã€ã€ã€Œæ–°æµ·è¯šã€ç­‰ï¼‰ä¼šè§¦å‘ `input_moderation` æŠ¥é”™ï¼Œ**å¯¼è‡´ç”Ÿæˆå¤±è´¥**ã€‚ä½ å¯ä»¥é€šè¿‡ã€Œå‰åœåŠ›ã€ã€ã€Œæ˜äº®çš„ç°ä»£æ—¥å¼åŠ¨æ¼«é£æ ¼ã€ç­‰éæ•æ„Ÿè¯æ¥è§„é¿
  - æ€»çš„æ¥è¯´,ã€Œé£æ ¼ã€æ¯”ã€Œè‰ºæœ¯å®¶ã€å®‰å…¨ï¼Œåƒæ˜¯ã€Œçš®å…‹æ–¯ã€ä¹Ÿæ˜¯æ”¯æŒçš„
  - æ›´ç¨³å¦¥çš„åšæ³•æ˜¯é‡‡ç”¨å·²æ•…è‰ºæœ¯å®¶æˆ–å¯¹åº”çš„é£æ ¼ï¼Œå¦‚ã€Œæ¢µé«˜ã€ã€ã€Œè’™å¨œä¸½èã€ç­‰
</Warning>

## æ¨¡å‹å’Œè´¹ç‡

| æ¨¡å‹                 | åå°æ‰£è´¹ (ç¾å…ƒ/æ¬¡) | çº¦ (äººæ°‘å¸/æ¬¡) |
| ------------------ | ----------- | --------- |
| `gpt-4o-image-vip` | \$0.009     | æŠ˜åˆçº¦ Â¥0.06 |
| `gpt-4o-image`     | \$0.005     | æŠ˜åˆçº¦ Â¥0.04 |

<Info>
  1. åå°è´¹ç‡ä»¥ç¾å…ƒä¸ºå‡†ã€‚
  2. ç”±äºé€†å‘æ¥å£çš„ç»´æŠ¤æˆæœ¬ä¸Šå‡ï¼Œå•æ¬¡è°ƒç”¨çš„ä»·æ ¼å·²ç»ä¸Šè°ƒã€‚<sub>ï¼ˆæ›´æ–°æ—¥æœŸï¼š20250604ï¼‰</sub>
  3. æ­£å¼çš„ `gpt-image-1` è¾“å…¥æ–‡æœ¬ Token éƒ¨åˆ†çš„è´¹ç‡æ˜¯ \$5/ç™¾ä¸‡ Tokensï¼Œé€†å‘æ¥å£åªæŒ‰å›¾ç‰‡ç»˜åˆ¶æ¬¡æ•°è®¡ç®—ã€‚
</Info>

## Python è°ƒç”¨ç¤ºä¾‹

ä½¿ç”¨å¤§å®¶ç†Ÿæ‚‰çš„ `v1/completions` ç«¯ç‚¹æ¥æä¾›æ”¯æŒï¼Œå®Œç¾å…¼å®¹ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒï¼š

<CodeGroup>

```py æ–‡ç”Ÿå›¾
from openai import OpenAI

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # æ¢æˆä½ åœ¨åå°ç”Ÿæˆçš„ Key "sk-***"
    base_url="https://aihubmix.com/v1"
)

# åˆ›å»ºèŠå¤©å®Œæˆè¯·æ±‚
stream = client.chat.completions.create(
    model="gpt-4o-image-vip", #list: gpt-4o-image-vip, gpt-4o-image
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": """Redesign [Girl wearing a pearl earring] as an anime-style illustrated cover. Preserve original essence and composition. Render in refined Kyoto Anime-inspired styleâ€”soft brushwork, cinematic lighting, progressive depth. 
Format in AV cover layout: 
Japanese-English mixed typography, serif title with significant visual hierarchy - sense of design is the key.
Extract words tha conveys profound meanings as title, then creative slogan, the original name can be a smaller information ONLY if necessary.
Subtly embed watermark "jerlin" in clothing or background. Maintain emotional tone and posture, soften only when necessary. 2:3 portrait"""
                }
            ]
        }
    ],
    stream=True
)

# ä½¿ç”¨ for å¾ªç¯å¤„ç†æµå¼å“åº”
for chunk in stream:
    try:
        if chunk.choices and len(chunk.choices) > 0 and chunk.choices[0].delta and chunk.choices[0].delta.content:
            print(chunk.choices[0].delta.content, end="", flush=True)
    except Exception as e:
        print(f"\nå¤„ç†å“åº”æ—¶å‡ºç°é”™è¯¯ï¼š{str(e)}")
```


```py å›¾æ–‡ç”Ÿå›¾
from openai import OpenAI
import base64

# Function to encode the image
def encode_image(image_path):
  with open(image_path, "rb") as image_file:
    return base64.b64encode(image_file.read()).decode('utf-8')

# Get the image path
image_path = "Portland_Head_Light__Maine.jpg"

# Encode the image
base64_image = encode_image(image_path)

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # æ¢æˆä½ åœ¨åå°ç”Ÿæˆçš„ Key
    base_url="https://aihubmix.com/v1"
)

stream = client.chat.completions.create(
    model="gpt-4o-image-vip", #gpt-4o-image-vip, gpt-4o-image
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": """convert the image into the style of ghibliï¼Œbright tone. 3:2"""
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": f"data:image/jpeg;base64,{base64_image}"
                    }
                }
            ]
        }
    ],
    stream=True
)

for chunk in stream:
    try:
        if chunk.choices and len(chunk.choices) > 0 and chunk.choices[0].delta and chunk.choices[0].delta.content:
            print(chunk.choices[0].delta.content, end="", flush=True)
    except Exception as e:
        print(f"\nå¤„ç†å“åº”æ—¶å‡ºç°é”™è¯¯ï¼š{str(e)}")
```


```py å¤šå›¾+æ–‡ç”Ÿå›¾
from openai import OpenAI
import base64

# Function to encode the image
def encode_image(image_path):
  with open(image_path, "rb") as image_file:
    return base64.b64encode(image_file.read()).decode('utf-8')

# Get the image path
image_path = "Portland_Head_Light__Maine.jpg"

# Encode the first image
base64_image1 = encode_image(image_path)

# Get the second image path
image_path2 = "ref.jpeg"

# Encode the second image
base64_image2 = encode_image(image_path2)

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # æ¢æˆä½ åœ¨åå°ç”Ÿæˆçš„ Key
    base_url="https://aihubmix.com/v1"
)

stream = client.chat.completions.create(
    model="gpt-4o-image-vip", #gpt-4o-image-vip, gpt-4o-image
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": """convert image 1 into the style of image 2, bright tone. 2:3"""
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": f"data:image/jpeg;base64,{base64_image1}"
                    }
                },
                {
                    "type": "image_url",
                    "image_url": {
                        "url": f"data:image/jpeg;base64,{base64_image2}"
                    }
                }
            ]
        }
    ],
    stream=True
)

# ä½¿ç”¨ for å¾ªç¯å¤„ç†æµå¼å“åº”
for chunk in stream:
    try:
        if chunk.choices and len(chunk.choices) > 0 and chunk.choices[0].delta and chunk.choices[0].delta.content:
            print(chunk.choices[0].delta.content, end="", flush=True)
    except Exception as e:
        print(f"\nå¤„ç†å“åº”æ—¶å‡ºç°é”™è¯¯ï¼š{str(e)}")
```

</CodeGroup>

## è¾“å‡ºç¤ºä¾‹

```
{
  "prompt": "Redesign 'Girl with a Pearl Earring' as an anime-style illustrated cover. Preserve the original essence and composition: the iconic side-glance pose, serene expression, and intimate framing. Render in refined Kyoto Anime-inspired style with soft brushwork, cinematic lighting, and progressive depth. Create an AV cover layout with Japanese-English mixed typography, using a prominent serif title with strong visual hierarchy. Extract profound words for the title and include a creative slogan. The original name 'Girl with a Pearl Earring' should appear as smaller text if needed. Subtly embed the watermark 'jerlin' in clothing or background. For modesty, replace any potential nudity with flowing fabric, hair, or veils while maintaining the emotional tone and posture. Soften details only when necessary.",
  "ratio": "2:3"
}

>ğŸ• Queuing.

>âš¡ Generating.....

>ğŸƒâ€ Progress 11....19....27...34....42....50....57...64....[100](https://videos.openai.com/vg-assets/assets%2Ftask_01jsccq77nfcsab7dn8bx7z230%2Fsrc_1.png?st=2025-04-21T13%3A08%3A48Z&se=2025-04-27T14%3A08%3A48Z&sks=b&skt=2025-04-21T13%3A08%3A48Z&ske=2025-04-27T14%3A08%3A48Z&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skoid=aa5ddad1-c91a-4f0a-9aca-e20682cc8969&skv=2019-02-02&sv=2018-11-09&sr=b&sp=r&spr=https%2Chttp&sig=xm6K6M7au3F3Vd9qcYxR3mYWrqAHsgbagbUV5GQo39w%3D&az=oaivgprodscus)

> âœ… Generation complete


![gen_01jsccq83pfg6ssfqf3pzfaytj](https://filesystem.site/cdn/20250421/XBCrAs6qvMARG7BkFX0KI3MBs1qoto.png)

[Click to download](https://filesystem.site/cdn/download/20250421/XBCrAs6qvMARG7BkFX0KI3MBs1qoto.png)

![gen_01jsccq83nf6ftmtx8y48h383y](https://filesystem.site/cdn/20250421/tQ62gh0BbdESApNmFJMNzsdUFDflkl.png)

[Click to download](https://filesystem.site/cdn/download/20250421/tQ62gh0BbdESApNmFJMNzsdUFDflkl.png)%      
```

## OpenAI æ­£å¼æ¥å£å…¼å®¹

å¦‚æœä½ æ›´åå¥½ OpenAI æœ€æ–°å‘å¸ƒçš„ Image generation è°ƒç”¨æ–¹å¼ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹å¤„ç†ï¼Œæ³¨æ„ 3 ç‚¹å³å¯ï¼š

1. ä¸èƒ½ä¼ è´¨é‡å‚æ•°ï¼Œæ¨¡å‹ `gpt-4o-image-vip` å’Œ `gpt-4o-image` è‡ªèº«æ†ç»‘äº†
2. ä¸æ”¯æŒæ‰“å°è¿½è¸ª Token ç”¨é‡çš„ usage å­—æ®µ
3. æœ€æ–°çš„è¾“å‡ºæ˜¯ Base64 å›¾ç‰‡æ•°æ®ï¼Œç”¨ä¾‹å·²ç»åšäº†è‡ªåŠ¨ä¿å­˜

```py Python
from openai import OpenAI
import os
import requests
import base64

client = OpenAI(
    api_key="AIHUBMIX_API_KEY", # æ›¿æ¢æˆä½ çš„ AiHubMix å¯†é’¥
    base_url="https://aihubmix.com/v1"
)

prompt = """
redesign poster of the movie [Black Swam], 3D cartoon, smooth render, bright tone, 2:3
"""

result = client.images.generate(
    model="gpt-4o-image-vip",
    prompt=prompt,
    n=1, # å•æ¬¡æ•°é‡
    size="1024x1536", # 1024x1024 (square), 1536x1024 (3:2 landscape), 1024x1536 (2:3 portrait), auto (default)
    #quality="high" # é€†å‘æ¨¡å‹ä¸èƒ½ä¼ è´¨é‡å‚æ•°ï¼Œæ¨¡å‹æ†ç»‘äº† ğŸ“
)

print(result) # æ‰“å°å®Œæ•´çš„ API å“åº”ï¼Œé€†å‘æ¥å£ä¸æ”¯æŒ usage ğŸ“

# å®šä¹‰æ–‡ä»¶åå‰ç¼€å’Œä¿å­˜ç›®å½•
output_dir = "." # å¯ä»¥æŒ‡å®šå…¶ä»–ç›®å½•
file_prefix = "image_gen-é€†å‘"

# ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨
os.makedirs(output_dir, exist_ok=True)

# éå†æ‰€æœ‰è¿”å›çš„å›¾ç‰‡æ•°æ®
for i, image_data in enumerate(result.data):
    # ä¼˜å…ˆå¤„ç† base64 å­—ç¬¦ä¸²
    if hasattr(image_data, "b64_json") and image_data.b64_json:
        image_bytes = base64.b64decode(image_data.b64_json)
        current_index = i
        while True:
            file_name = f"{file_prefix}_{current_index}.png"
            file_path = os.path.join(output_dir, file_name)
            if not os.path.exists(file_path):
                break
            current_index += 1
        with open(file_path, "wb") as f:
            f.write(image_bytes)
        print(f"å›¾ç‰‡å·²ä¿å­˜è‡³ï¼š{file_path} (base64)")
    # å…¶æ¬¡å¤„ç† url å­—æ®µï¼ˆä¿ç•™ç¨³å¥å¤„ç†ï¼Œé˜²æ­¢å…¼å®¹æ¥å£å†å˜æ›´ï¼‰
    elif hasattr(image_data, "url") and image_data.url:
        try:
            response = requests.get(image_data.url, stream=True)
            response.raise_for_status()
            image_bytes = response.content
            current_index = i
            while True:
                file_name = f"{file_prefix}_{current_index}.png"
                file_path = os.path.join(output_dir, file_name)
                if not os.path.exists(file_path):
                    break
                current_index += 1
            with open(file_path, "wb") as f:
                f.write(image_bytes)
            print(f"å›¾ç‰‡å·²ä¿å­˜è‡³ï¼š{file_path} (url)")
        except requests.exceptions.RequestException as e:
            print(f"ä¸‹è½½ç¬¬ {i} å¼ å›¾ç‰‡å¤±è´¥ï¼š{e}")
        except Exception as e:
            print(f"å¤„ç†ç¬¬ {i} å¼ å›¾ç‰‡æ—¶å‘ç”Ÿé”™è¯¯ï¼š{e}")
    else:
        print(f"ç¬¬ {i} å¼ å›¾ç‰‡æ•°æ®ä¸­æ—¢æ—  b64_json ä¹Ÿæ—  urlï¼Œè·³è¿‡ä¿å­˜ã€‚")
```

## æ•ˆæœå±•ç¤º

<Card title="æˆ´çç é¡¹é“¾çš„å¥³å­©" img="../../public/en/Girl-with-a-Pearl-Earring.PNG">
  1. åç”»é‡æ¼”ç»ï¼Œå¸¦æ’ç‰ˆå’Œæ°´å°ç›´å‡ºã€‚
</Card>

<Card title="çš®å…‹æ–¯å¡é€š" img="../../public/en/pixar.png">
  1. çš®å…‹æ–¯ 3D å¡é€šé£æ ¼ï¼Œç¨³å¦‚è€ç‹—ã€‚
</Card>

<Card title="3D" img="../../public/en/ghibli.png">
  1. æœ€å—æ¬¢è¿çš„å‰åœåŠ›
</Card>

## å®ç”¨æç¤º

<Tip>
  - æ”¯æŒä»»ä½•è¯­è¨€ï¼Œä¸­æ–‡ç»˜åˆ¶ä¹Ÿå¾ˆç¨³å®šï¼Œä½†æˆ‘ä»¬ä¹Ÿä¸å»ºè®®ç»˜åˆ¶å¤§é‡çš„æ–‡æœ¬ã€‚
  - ç”»å¹…æ¯”ä¾‹åœ¨ prompt ä¸­æŒ‡å®šï¼Œå¦åˆ™ 4o è‡ªåŠ¨åˆ¤æ–­ã€‚æ”¯æŒ 2:3ã€3:2ã€1:1ã€‚
  - æ²¡æœ‰çµæ„Ÿå°±ç»™å‚è€ƒå›¾ï¼Œæ”¯æŒå•å›¾å’Œå¤šå›¾ã€‚
  - ä¸Šä¼ çš„å›¾ç‰‡å¯ä»¥åšå‹ç¼©é¢„å¤„ç†ï¼Œæå‡é€Ÿåº¦ã€‚
  - æ”¯æŒé€æ˜èƒŒæ™¯ï¼Œå…æŠ å›¾ã€‚â€”â€”åªéœ€è¦åœ¨ Prompt ä¸­è¡¥å……è¦æ±‚ã€‚
</Tip>