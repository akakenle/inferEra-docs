---
title: "Claude Code"
description: " 在 AIHubMix 中使用 Claude Code"
icon: "terminal"
---

## 快速开始

本指南将帮助您在几分钟内使用由 AIHubMix 提供的 Claude Code.

### 1. 安装 Claude Code

#### 本地安装

<CodeGroup>

```shellscript macOS
curl -fsSL https://claude.ai/install.sh | bash
```


```shellscript Windows
irm https://claude.ai/install.ps1 | iex
```

</CodeGroup>

#### 使用 npm 安装

需要 [Node.js 18 或更高版本](https://nodejs.org/en/download/)

```shellscript
npm install -g @anthropic-ai/claude-code
```

### 2. 配置 AIHubMix API

要通过兼容 Anthropic API 的方式来接入 AIHubMix 的模型服务，需要配置以下环境变量。

1. 将`ANTHROPIC_BASE_URL` 设置为`https://aihubmix.com`
2. `ANTHROPIC_API_KEY` 设置为从 [AIHubMix 平台](https://console.aihubmix.com/token) 获取的 API Key
3. `ANTHROPIC_MODEL`：设置为[模型列表](https://aihubmix.com/models)中支持的模型。

<Tabs>
  <Tab title="macOS">
    1. 在终端中执行以下命令，查看默认 Shell 类型。

    ```shellscript
    echo $SHELL
    ```

    2. 根据 Shell 类型设置环境变量，命令如下：

    <CodeGroup>

    ```shellscript Zsh
    # AIHUBMIX_API_KEY 替换为你从 AIHUBMIX 平台获取的 Key
    echo 'export ANTHROPIC_BASE_URL="https://aihubmix.com"' >> ~/.zshrc
    echo 'export ANTHROPIC_API_KEY="AIHUBMIX_API_KEY"' >> ~/.zshrc
    echo 'export ANTHROPIC_MODEL="claude-sonnet-4-5"' >> ~/.zshrc
    ```

    
    ```shellscript Bash
    # AIHUBMIX_API_KEY 替换为你从 AIHUBMIX 平台获取的 Key
    echo 'export ANTHROPIC_BASE_URL="https://aihubmix.com"' >> ~/.bash_profile
    echo 'export ANTHROPIC_API_KEY="AIHUBMIX_API_KEY"' >> ~/.bash_profile
    echo 'export ANTHROPIC_MODEL="claude-sonnet-4-5"' >> ~/.bash_profile
    ```

    </CodeGroup>

    3. 在终端中执行下列命令，使环境变量生效。

    <CodeGroup>

    ```shellscript Zsh
    source ~/.zshrc
    ```

    
    ```shellscript Bash
    source ~/.bash_profile
    ```

    </CodeGroup>

    4. 打开一个新的终端，执行下列命令，查看环境变量是否生效。

    ```shellscript
    echo $ANTHROPIC_BASE_URL
    echo $ANTHROPIC_API_KEY
    echo $ANTHROPIC_MODEL
    ```
  </Tab>
  <Tab title="Windows">
    在 Windows 中，可以通过 CMD 或 PowerShell 将 AiHubMix 的 Base URL 和 [API Key](https://help.aliyun.com/zh/model-studio/get-api-key) 设置为环境变量。

    <Tabs>
      <Tab title="CMD">
        1. 在 CMD 中运行以下命令，设置环境变量。

        ```shellscript
        REM AIHubMix API Key 替换 AIHUBMIX_API_KEY
        setx ANTHROPIC_API_KEY "AIHUBMIX_API_KEY"
        setx ANTHROPIC_BASE_URL "https://aihubmix.com"
        setx ANTHROPIC_MODEL "claude-sonnet-4-5"
        ```

        2. 打开一个新的 CMD 窗口，运行以下命令，检查环境变量是否生效。

        ```shellscript
        echo %ANTHROPIC_API_KEY%
        echo %ANTHROPIC_BASE_URL%
        echo %ANTHROPIC_MODEL%
        ```
      </Tab>
      <Tab title="PowerShell">
        1. 在 PowerShell 中运行以下命令，设置环境变量。

        ```shellscript
        # AIHubMix API Key 替换 AIHUBMIX_API_KEY
        [Environment]::SetEnvironmentVariable("ANTHROPIC_API_KEY", "AIHUBMIX_API_KEY", [EnvironmentVariableTarget]::User)
        [Environment]::SetEnvironmentVariable("ANTHROPIC_BASE_URL", "https://aihubmix.com", [EnvironmentVariableTarget]::User)
        [Environment]::SetEnvironmentVariable("ANTHROPIC_MODEL", "claude-sonnet-4-5", [EnvironmentVariableTarget]::User)
        ```

        2. 打开一个新的 PowerShell 窗口，运行以下命令，检查环境变量是否生效。

        ```shellscript
        echo $env:ANTHROPIC_API_KEY
        echo $env:ANTHROPIC_BASE_URL
        echo $env:ANTHROPIC_MODEL
        ```
      </Tab>
    </Tabs>
  </Tab>
</Tabs>

### 3. 开始使用

完成配置后，进入你的工作目录，在终端运行 `claude` 命令开始使用 Claude Code。

```bash
$ cd /path/your-project
> claude
```

初次使用 Claude Code 时，可能会强制要求登录 Anthropic 账户。请按以下步骤操作以跳过该流程：

![Cc 7](/public/cn/cc-7.jpg)

1. 定位用户主目录下的 `.claude.json` 文件，具体路径如下：
   - macOS / Linux: `~/.claude.json`
   - Windows: `C:\Users\%USERNAME%\.claude.json`
2. 设置`hasCompletedOnboarding` 字段的值为 `true`

```json
{
  "hasCompletedOnboarding": true
}
```

3. 保存文件，然后在终端中重新运行 `claude` 。

#### （可选）更多配置模型的方式

Claude Code 支持以下模型配置方式，**按优先级从高到低排列**，优先级高的配置会覆盖优先级低的配置。

1. **对话期间：** 执行`/model <模型名称>`命令切换模型。适用于临时切换模型。

```
/model claude-sonnet-4-5
```

2. **启动 Claude Code 时：** 执行`claude --model <模型名称>`指定模型。适用于单次会话。

```
claude --model claude-sonnet-4-5
```

3. **设置环境变量**：可按任务复杂度配置不同级别的模型，Claude Code 会根据任务类型自动选择合适的模型。适用于全局生效。

```shellscript
export ANTHROPIC_DEFAULT_OPUS_MODEL="claude-opus-4-5"
export ANTHROPIC_DEFAULT_SONNET_MODEL="claude-sonnet-4-5"
export ANTHROPIC_DEFAULT_HAIKU_MODEL="claude-haiku-4-5"
```

其中：

- `ANTHROPIC_DEFAULT_OPUS_MODEL`：用于复杂推理、架构设计等高难度任务。
- `ANTHROPIC_DEFAULT_SONNET_MODEL`：用于代码编写、功能实现等日常任务。
- `ANTHROPIC_DEFAULT_HAIKU_MODEL`：用于语法检查、文件搜索等简单任务。

4. **在 setting.json 配置文件中永久设置**：在项目根目录或用户主目录创建`settings.json`文件，并写入模型配置信息，可分别进行项目级或用户级的永久配置。

```json
{
  "env": {
    "ANTHROPIC_DEFAULT_OPUS_MODEL": "claude-opus-4-5",
    "ANTHROPIC_DEFAULT_SONNET_MODEL": "claude-sonnet-4-5",
    "ANTHROPIC_DEFAULT_HAIKU_MODEL": "claude-haiku-4-5"
  }
}
```

## 通过 cc-switch 配置

1. 运行 CC-Switch，点击「添加供应商」。

![Cc 1](/public/cn/cc-1.jpg)

2. 在预设列表中选择「AiHubMix」。

![Cc 2](/public/cn/cc-2.jpg)

3. 在「API Key」栏中填写你的密钥。

![Cc 3](/public/cn/cc-3.jpg)

4. 配置完成后，点击「添加」保存设置。

![Cc 4](/public/cn/cc-4.jpg)

5. 返回首页，在供应商列表中选择「AiHubMix」，点击「启动」即可使用。

![Cc 5](/public/cn/cc-5.jpg)

## 常见问题

### Q：在 Claude Code 中使用，提示「401 , No token provided....」

打开 Claude 终端，输入 `/config` ，找到 `Use custom API key` 选项，检查 Token 是否正确配置。

![install](../../public/cn/cc-6.png)

## 更多资源

- [Github](https://github.com/inferera/aihubmix/blob/main/packages/claude-code/README.md)
- [npm 包](https://www.npmjs.com/package/@aihubmix/claude-code)
- [官方最佳实践](https://www.anthropic.com/engineering/claude-code-best-practices)
- [官方配置指引](https://docs.anthropic.com/en/docs/claude-code/settings#settings-files)

祝你使用愉快！