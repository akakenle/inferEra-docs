---
title: "Claude Code"
description: "Using Claude Code in AIHubMix"
icon: "terminal"
---

## Quick Start

This guide will help you get started with Claude Code provided by AIHubMix in just a few minutes.

### 1. Install Claude Code

#### Local Installation

<CodeGroup>

```shellscript macOS
curl -fsSL https://claude.ai/install.sh | bash
```


```shellscript Windows
irm https://claude.ai/install.ps1 | iex
```

</CodeGroup>

#### Install via npm

You need [Node.js version 18 or higher](https://nodejs.org/en/download/).

```shellscript
npm install -g @anthropic-ai/claude-code
```

### 2. Configure AIHubMix API

To access AIHubMix's model services via the compatible Anthropic API, you need to configure the following environment variables.

1. Set `ANTHROPIC_BASE_URL` to `https://aihubmix.com`
2. Set `ANTHROPIC_AUTH_TOKEN` to the API Key obtained from the [AIHubMix platform](https://console.aihubmix.com/token)
3. Set `ANTHROPIC_MODEL` to a supported model from the [model list](https://aihubmix.com/models).

<Tabs>
  <Tab title="macOS">
    1. Run the following command in the terminal to check your default Shell type.

    ```shellscript
    echo $SHELL
    ```

    2. Set the environment variables according to your Shell type using the following commands:

    <CodeGroup>

    ```shellscript Zsh
    # Replace AIHUBMIX_API_KEY with the Key obtained from the AIHUBMIX platform
    echo 'export ANTHROPIC_BASE_URL="https://aihubmix.com"' >> ~/.zshrc
    echo 'export ANTHROPIC_AUTH_TOKEN="AIHUBMIX_API_KEY"' >> ~/.zshrc
    echo 'export ANTHROPIC_MODEL="claude-sonnet-4-5"' >> ~/.zshrc
    ```

    
    ```shellscript Bash
    # Replace AIHUBMIX_API_KEY with the Key obtained from the AIHUBMIX platform
    echo 'export ANTHROPIC_BASE_URL="https://aihubmix.com"' >> ~/.bash_profile
    echo 'export ANTHROPIC_AUTH_TOKEN="AIHUBMIX_API_KEY"' >> ~/.bash_profile
    echo 'export ANTHROPIC_MODEL="claude-sonnet-4-5"' >> ~/.bash_profile
    ```

    </CodeGroup>

    3. Run the following command in the terminal to make the environment variables effective.

    <CodeGroup>

    ```shellscript Zsh
    source ~/.zshrc
    ```

    
    ```shellscript Bash
    source ~/.bash_profile
    ```

    </CodeGroup>

    4. Open a new terminal and run the following commands to check if the environment variables are effective.

    ```shellscript
    echo $ANTHROPIC_BASE_URL
    echo $ANTHROPIC_AUTH_TOKEN
    echo $ANTHROPIC_MODEL
    ```
  </Tab>
  <Tab title="Windows">
    In Windows, you can set the AiHubMix Base URL and [API Key](https://help.aliyun.com/zh/model-studio/get-api-key) as environment variables using CMD or PowerShell.

    <Tabs>
      <Tab title="CMD">
        1. Run the following command in CMD to set the environment variables.

        ```shellscript
        REM Replace AIHUBMIX_API_KEY with your AIHubMix API Key
        setx ANTHROPIC_AUTH_TOKEN "AIHUBMIX_API_KEY"
        setx ANTHROPIC_BASE_URL "https://aihubmix.com"
        setx ANTHROPIC_MODEL "claude-sonnet-4-5"
        ```

        2. Open a new CMD window and run the following commands to check if the environment variables are effective.

        ```shellscript
        echo %ANTHROPIC_AUTH_TOKEN%
        echo %ANTHROPIC_BASE_URL%
        echo %ANTHROPIC_MODEL%
        ```
      </Tab>
      <Tab title="PowerShell">
        1. Run the following command in PowerShell to set the environment variables.

        ```shellscript
        # Replace AIHUBMIX_API_KEY with your AIHubMix API Key
        [Environment]::SetEnvironmentVariable("ANTHROPIC_AUTH_TOKEN", "AIHUBMIX_API_KEY", [EnvironmentVariableTarget]::User)
        [Environment]::SetEnvironmentVariable("ANTHROPIC_BASE_URL", "https://aihubmix.com", [EnvironmentVariableTarget]::User)
        [Environment]::SetEnvironmentVariable("ANTHROPIC_MODEL", "claude-sonnet-4-5", [EnvironmentVariableTarget]::User)
        ```

        2. Open a new PowerShell window and run the following commands to check if the environment variables are effective.

        ```shellscript
        echo $env:ANTHROPIC_AUTH_TOKEN
        echo $env:ANTHROPIC_BASE_URL
        echo $env:ANTHROPIC_MODEL
        ```
      </Tab>
    </Tabs>
  </Tab>
</Tabs>

### 3. Get Started

Once the configuration is complete, navigate to your working directory and run the `claude` command in the terminal to start using Claude Code.

```bash
$ cd /path/your-project
> claude
```

When using Claude Code for the first time, you may be required to log in to your Anthropic account. Please follow these steps to skip that process:

![Cc 7](/public/en/cc-7.jpg)

1. Locate the `.claude.json` file in your user home directory, with the following paths:
   - macOS / Linux: `~/.claude.json`
   - Windows: `C:\Users\%USERNAME%\.claude.json`
2. Set the `hasCompletedOnboarding` field's value to `true`.

```json
{
  "hasCompletedOnboarding": true
}
```

3. Save the file, then rerun `claude` in the terminal.

#### (Optional) Additional Model Configuration Methods

Claude Code supports the following model configuration methods, **ranked in order of priority from highest to lowest**, where higher-priority configurations will override lower-priority ones.

1. **During a conversation:** Execute the `/model <model_name>` command to switch models. This is suitable for temporary model changes.

```
/model claude-sonnet-4-5
```

2. **When starting Claude Code:** Execute `claude --model <model_name>` to specify the model. This is suitable for single-session use.

```
claude --model claude-sonnet-4-5
```

3. **Set environment variables:** You can configure different levels of models based on the complexity of the task. Claude Code will automatically select the appropriate model based on the task type. This is suitable for global effects.

```shellscript
export ANTHROPIC_DEFAULT_OPUS_MODEL="claude-opus-4-5"
export ANTHROPIC_DEFAULT_SONNET_MODEL="claude-sonnet-4-5"
export ANTHROPIC_DEFAULT_HAIKU_MODEL="claude-haiku-4-5"
```

Where:

- `ANTHROPIC_DEFAULT_OPUS_MODEL`: For complex reasoning, architectural design, and other high-difficulty tasks.
- `ANTHROPIC_DEFAULT_SONNET_MODEL`: For coding, feature implementation, and other routine tasks.
- `ANTHROPIC_DEFAULT_HAIKU_MODEL`: For grammar checks, file searches, and other simple tasks.

4. **Permanently set in the settings.json configuration file:** Create a `settings.json` file in the project root directory or user home directory, and write the model configuration information for project-level or user-level permanent configuration.

```json
{
  "env": {
    "ANTHROPIC_DEFAULT_OPUS_MODEL": "claude-opus-4-5",
    "ANTHROPIC_DEFAULT_SONNET_MODEL": "claude-sonnet-4-5",
    "ANTHROPIC_DEFAULT_HAIKU_MODEL": "claude-haiku-4-5"
  }
}
```

## Configure via cc-switch

1. Run CC-Switch and click "Add Vendor."

![Cc 1](/public/en/cc-1.jpg)

2. Select "AiHubMix" from the preset list.

![Cc 2](/public/en/cc-2.jpg)

3. Fill in your key in the "API Key" field.

<img
  src="/public/en/cc-3.jpg"
  alt="Cc 3"
  className="hidden dark:block"
/>
<img
  src="/public/en/cc-3.png"
  alt="Cc 3"
  className="dark:hidden"
/>

4. After configuration is complete, click "Add" to save the settings.

<img
  src="/public/en/cc-4.jpg"
  alt="Cc 4"
  className="hidden dark:block"
/>
<img
  src="/public/en/cc-4.png"
  alt="Cc 4"
  className="dark:hidden"
/>

5. Return to the homepage, select "AiHubMix" from the vendor list, and click "Start" to use it.

![Cc 5](/public/en/cc-5.jpg)

## Frequently Asked Questions

### Q: When using Claude Code, I receive the message "401, No token provided...."

Open the Claude terminal and enter `/config`, find the `Use custom API key` option, and check whether the Token is configured correctly.

![install](../../public/en/cc-6.png)

### Q: After successfully installing on macOS, I still get an error: `zsh: command not found: claude`

This is because the Claude CLI is installed, but its executable directory is not added to the system `PATH`.

1. Confirm the Claude installation path. The official Claude Code script typically installs in one of the following directories:

- `~/.claude/bin`
- `~/.local/bin`

Run the following command in the terminal:

```bash
ls -l ~/.claude/bin
or
ls -l ~/.local/bin | grep claude
```

If you see the claude file, it means the installation was successful, but the PATH is not configured.

2. Add the installation directory to the PATH. Execute the corresponding command based on the actual installation location:

##### Case A: Installed in `~/.claude/bin`

```shellscript
echo 'export PATH="$HOME/.claude/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

##### Case B: Installed in `~/.local/bin`

```shellscript
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

3. Verify if it takes effect. Execute:

```shellscript
which claude
claude -v
```

If you can see the `claude` path and version number, the installation was successful.

## More Resources

- [Github](https://github.com/inferera/aihubmix/blob/main/packages/claude-code/README.md)
- [npm Package](https://www.npmjs.com/package/@aihubmix/claude-code)
- [Official Best Practices](https://www.anthropic.com/engineering/claude-code-best-practices)
- [Official Configuration Guide](https://docs.anthropic.com/en/docs/claude-code/settings#settings-files)

Happy coding!